<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chameleon</title>
  <link rel="stylesheet" href="panel.css">
  <link rel="stylesheet" href="../lib/codemirror/codemirror.min.css">
  <link rel="stylesheet" href="../lib/codemirror/addon/hint/show-hint.min.css">
  <link rel="stylesheet" href="../lib/icomoon/style.css">
</head>
<body>

  <div class="panel-root">

    <!-- Left Sidebar -->
    <aside class="sidebar">

      <!-- Domain Info -->
      <div class="sidebar-section">
        <div class="sidebar-header">
          <span class="sidebar-logo"><img src="../icons/icon32.png" /></span>
          <span class="sidebar-title">Chameleon</span>
        </div>
        <div class="domain-display">
          <span class="domain-label" data-i18n="currentDomainLabel">Domain:</span>
          <span class="domain-name" id="currentDomain">Loading...</span>
        </div>
        <div class="sidebar-toggles">
          <label class="toggle-small">
            <input type="checkbox" id="autoInjectToggle">
            <span class="toggle-slider-small"></span>
            <span class="toggle-label-small" data-i18n="autoInjectLabel">Auto-inject</span>
          </label>
          <label class="toggle-small">
            <input type="checkbox" id="useJQueryToggle">
            <span class="toggle-slider-small"></span>
            <span class="toggle-label-small">jQuery</span>
          </label>
        </div>
        <input type="text" id="urlPatternInput" placeholder="URL Pattern" class="sidebar-input"
               data-i18n-placeholder="urlPatternPlaceholder">
      </div>

      <!-- Snippets -->
      <div class="sidebar-section">
        <div class="sidebar-section-title" data-i18n="snippetsTitle">Snippets</div>
        <select id="snippetSelect" class="sidebar-select"></select>
        <div class="sidebar-snippet-controls">
          <input type="text" id="snippetNameInput" class="sidebar-input sidebar-input-sm"
                 placeholder="Snippet name" data-i18n-placeholder="snippetNamePlaceholder">
          <div class="sidebar-snippet-actions">
            <button class="sidebar-btn sidebar-btn-sm" id="addSnippetBtn" data-i18n="addSnippetBtn">+ Add</button>
            <button class="sidebar-btn sidebar-btn-sm sidebar-btn-danger" id="deleteSnippetBtn" data-i18n="deleteSnippetBtn">Del</button>
          </div>
          <div class="sidebar-snippet-meta">
            <button class="sidebar-btn-icon" id="moveUpBtn" title="Move up">‚ñ≤</button>
            <button class="sidebar-btn-icon" id="moveDownBtn" title="Move down">‚ñº</button>
            <label class="snippet-enabled-small">
              <input type="checkbox" id="snippetEnabledToggle" checked>
              <span data-i18n="snippetOnLabel">On</span>
            </label>
            <label class="delay-label-small">
              <span data-i18n="delayLabel">Delay:</span>
              <input type="number" id="delayInput" min="0" max="60" value="0" class="delay-input-small">
            </label>
          </div>
        </div>
      </div>

      <!-- Footer: All Icon Buttons -->
      <div class="sidebar-footer">
        <button class="sidebar-btn-icon" id="themeToggleBtn" title="Toggle theme"><span class="icon icon-day"></span></button>
        <button class="sidebar-btn-icon btn-lang" id="langBtn" title="Switch language">TR</button>
        <button class="sidebar-btn-icon" id="pickerBtn" data-i18n-title="titlePickElement" title="Picker"><span class="icon icon-selection"></span></button>
        <button class="sidebar-btn-icon" id="historyBtn" data-i18n-title="titleHistory" title="History"><span class="icon icon-history"></span></button>
        <button class="sidebar-btn-icon" id="settingsBtn" data-i18n-title="titleSettings" title="Settings"><span class="icon icon-setting"></span></button>
        <button class="sidebar-btn-icon" id="helpBtn" data-i18n-title="titleHelp" title="Help">?</button>
        <button class="sidebar-btn-icon" id="exportBtn" data-i18n-title="titleExport" title="Export"><span class="icon icon-upload"></span></button>
      </div>

    </aside>

    <!-- Sidebar Resizer -->
    <div class="sidebar-resizer" id="sidebarResizer"></div>

    <!-- Main Editor Area -->
    <main class="main-area">

      <!-- CSS Editor -->
      <div class="editor-pane">
        <div class="editor-header">
          <label>CSS</label>
           <span class="editor-info" id="cssInfo">0 lines</span>
          <div class="editor-header-actions">
            <button class="sidebar-btn-icon" id="uploadCssBtn" title="Upload CSS file" data-i18n-title="uploadCssTitle"><span class="icon icon-file-upload"></span></button>
            <button class="sidebar-btn-icon editor-btn-clear" id="clearCssBtn" title="Clear CSS editor" data-i18n-title="clearCssTitle"><span class="icon icon-trash-can"></span></button>
          </div>
         
        </div>
        <div id="cssEditor" class="cm-editor-wrapper"></div>
      </div>

      <!-- JS Editor -->
      <div class="editor-pane">
        <div class="editor-header">
          <label>JavaScript</label>
          <span class="editor-info" id="jsInfo">0 lines</span>
          <div class="editor-header-actions">
            <button class="sidebar-btn-icon" id="uploadJsBtn" title="Upload JS file" data-i18n-title="uploadJsTitle"><span class="icon icon-file-upload"></span></button>
            <button class="sidebar-btn-icon editor-btn-clear" id="clearJsBtn" title="Clear JS editor" data-i18n-title="clearJsTitle"><span class="icon icon-trash-can"></span></button>
          </div>
         
        </div>
        <div id="jsEditor" class="cm-editor-wrapper"></div>
      </div>

      <!-- Action Bar -->
      <div class="action-bar">
        <div class="action-buttons">
          <button class="btn btn-secondary" id="saveBtn" data-i18n="saveBtn">üíæ Save</button>
          <button class="btn btn-primary" id="injectBtn" data-i18n="injectBtn">üöÄ Inject Now</button>
          <div class="export-dropdown">
            <button class="btn btn-info" id="exportFilesBtn" data-i18n="exportFilesBtn">üì¶ Export Files ‚ñº</button>
            <div class="export-dropdown-menu">
              <div class="export-dropdown-item" data-minify="false" data-i18n="exportNormal">Export as ZIP</div>
              <div class="export-dropdown-item" data-minify="true" data-i18n="exportMinified">Export Minified</div>
            </div>
          </div>
          <button class="btn btn-danger" id="clearBtn" data-i18n="clearBtn">üßπ Clear</button>
          <a href="https://www.buymeacoffee.com/yavuzmercan" target="_blank" class="bmc-button" title="Support the developer">
            ‚òï Buy me a coffee
          </a>
        </div>
      </div>

    </main>

  </div>

  <!-- Modals (Settings, History, Help, Picker) ‚Äî same as panel-b -->
  <div class="panel-overlay" id="panelOverlay">
    <div class="panel">
      <div class="panel-header">
        <h2 data-i18n="settingsPanelTitle">Settings & Profiles</h2>
        <button class="btn-icon" id="closePanelBtn">‚úï</button>
      </div>
      <div class="panel-body">
        <div class="panel-section">
          <h3 data-i18n="profilesSectionTitle">Profiles</h3>
          <input type="search" class="search-input" id="profileSearch" placeholder="üîç Search profiles..." data-i18n-placeholder="profileSearchPlaceholder">
          <div class="profiles-list" id="profilesList"></div>
        </div>
        <div class="panel-section">
          <h3 data-i18n="globalSettingsTitle">Global Settings</h3>
          <label class="setting-item">
            <input type="checkbox" id="liveReloadToggle">
            <div class="setting-info"><span data-i18n="liveReloadLabel">Live Reload</span></div>
          </label>
          <label class="setting-item">
            <input type="checkbox" id="notificationsToggle">
            <div class="setting-info"><span data-i18n="notificationsLabel">Show Notifications</span></div>
          </label>
          <label class="setting-item">
            <input type="checkbox" id="autoInjectAllToggle">
            <div class="setting-info"><span data-i18n="autoInjectAllLabel">Auto-inject All Profiles</span></div>
          </label>
          <label class="setting-item">
            <input type="checkbox" id="themeToggle">
            <div class="setting-info"><span data-i18n="lightThemeLabel">Light Theme</span></div>
          </label>
          <label class="setting-item">
            <input type="checkbox" id="syncToggle">
            <div class="setting-info"><span data-i18n="syncLabel">Sync Across Devices</span></div>
          </label>
          <div id="syncStatus" class="sync-status" style="display:none"></div>
        </div>
          <div class="panel-section">
          <h3>Panel Layout</h3>
          <label class="setting-item">
            <select id="layoutSelect" class="layout-select">
              <option value="a" selected>Layout A ‚Äî Sidebar + Stacked (Current)</option>
              <option value="b" >Layout B ‚Äî Side-by-Side </option>
              <option value="c">Layout C ‚Äî Three Columns</option>
            </select>
          </label>
          <small style="color: var(--text-dim); font-size: 11px; padding: 0 4px;">‚ö†Ô∏è Changes take effect when DevTools is reopened</small>
        </div>
        <div class="panel-section">
          <h3 data-i18n="dataManagementTitle">Data Management</h3>
          <button class="btn btn-secondary btn-block" id="importBtn" data-i18n="importProfilesBtn">üì• Import Profiles</button>
          <button class="btn btn-secondary btn-block" id="exportBtnFull" data-i18n="exportAllBtn">üì§ Export All Data</button>
          <button class="btn btn-danger btn-block" id="clearAllBtn" data-i18n="clearAllProfilesBtn">üóëÔ∏è Clear All Profiles</button>
        </div>

        <div class="settings-footer">
          <small data-i18n="versionInfo">Version 2.0.0 | Made with ‚ù§Ô∏è for developers</small>
        </div>

      </div>
    </div>
  </div>

  <div class="panel-overlay" id="historyPanelOverlay">
    <div class="panel">
      <div class="panel-header">
        <h2 data-i18n="historyPanelTitle">Inject History</h2>
        <div class="panel-header-actions">
          <button class="btn-icon-sm" id="clearHistoryBtn" data-i18n="clearHistoryBtnLabel">üóëÔ∏è Clear</button>
          <button class="btn-icon" id="closeHistoryPanelBtn">‚úï</button>
        </div>
      </div>
      <div class="panel-body">
        <div id="historyList" class="history-list-full"></div>
      </div>
    </div>
  </div>

  <div class="panel-overlay" id="helpPanelOverlay">
    <div class="panel">
      <div class="panel-header">
        <h2 data-i18n="helpPanelTitle">How to Use</h2>
        <button class="btn-icon" id="closeHelpPanelBtn">‚úï</button>
      </div>
      <div class="panel-body">
        <div id="helpContent"></div>
      </div>
    </div>
  </div>

  <div class="picker-modal-overlay" id="pickerModalOverlay">
    <div class="picker-modal">
      <div class="picker-modal-header">
        <span class="picker-modal-title" data-i18n="pickerModalTitle">üéØ Element Picked</span>
        <button class="btn-icon" id="pickerModalClose">‚úï</button>
      </div>
      <div class="picker-modal-selector">
        <code id="pickerSelector"></code>
      </div>
      <div class="picker-modal-label" data-i18n="pickerInsertAsLabel">Insert as:</div>
      <div class="picker-modal-actions">
        <button class="picker-modal-btn picker-modal-btn-css" id="pickerInsertCss">
          <span class="picker-modal-btn-icon">üé®</span>
          <span class="picker-modal-btn-label"><strong>CSS</strong><small>selector { }</small></span>
        </button>
        <button class="picker-modal-btn picker-modal-btn-js" id="pickerInsertJs">
          <span class="picker-modal-btn-icon">‚ö°</span>
          <span class="picker-modal-btn-label"><strong>JavaScript</strong><small>document.querySelector('‚Ä¶')</small></span>
        </button>
        <button class="picker-modal-btn picker-modal-btn-jq" id="pickerInsertJq">
          <span class="picker-modal-btn-icon">üü°</span>
          <span class="picker-modal-btn-label"><strong>jQuery</strong><small>$('selector')</small><span class="jq-hint">‚ö° jQuery will be enabled</span></span>
        </button>
      </div>
    </div>
  </div>

  <input type="file" id="importFileInput" accept=".json" style="display: none;">

  <!-- Hidden file inputs for CSS/JS upload -->
  <input type="file" id="cssFileInput" accept=".css" style="display: none;">
  <input type="file" id="jsFileInput" accept=".js" style="display: none;">

  <!-- Custom Color Picker Popup -->
  <div id="colorPickerPopup" class="color-picker-popup" style="display: none;">
    <div class="color-picker-popup-header">
      <span>Pick Color</span>
      <button id="colorPickerClose" class="color-picker-close">√ó</button>
    </div>
    <div class="color-picker-popup-body">
      <input type="color" id="colorPickerInput" class="color-picker-input">
      <input type="text" id="colorPickerHexInput" class="color-picker-hex" placeholder="#000000">
      <div class="color-picker-alpha">
        <label>Alpha:</label>
        <input type="range" id="colorPickerAlpha" min="0" max="100" value="100" class="color-picker-alpha-slider">
        <span id="colorPickerAlphaValue">100%</span>
      </div>
    </div>
  </div>

  <script src="../lib/codemirror/codemirror.min.js"></script>
  <script src="../lib/codemirror/mode/css/css.min.js"></script>
  <script src="../lib/codemirror/mode/javascript/javascript.min.js"></script>
  <script src="../lib/codemirror/addon/hint/show-hint.min.js"></script>
  <script src="../lib/codemirror/addon/hint/css-hint.min.js"></script>
  <script src="../lib/codemirror/addon/hint/anyword-hint.min.js"></script>
  <script src="../lib/codemirror/addon/edit/matchbrackets.min.js"></script>
  <script src="../lib/codemirror/addon/edit/closebrackets.min.js"></script>
  <script src="../lib/codemirror/addon/display/placeholder.min.js"></script>
  <script src="../lib/i18n.js"></script>
  <script src="../lib/storage.js"></script>
  <script src="../lib/jszip.min.js"></script>
  <script src="../lib/terser.min.js"></script>
  <script src="../lib/csso.min.js"></script>
  <script src="../lib/panel-common.js"></script>
  <script src="../lib/panel.js"></script>
  <script src="panel-a.js"></script>

</body>
</html>
